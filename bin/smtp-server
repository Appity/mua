#!/usr/bin/env ruby

$LOAD_PATH << File.expand_path('../lib', __dir__)

require 'bundler'

Bundler.require(:default, ENV['APP_ENV']&.to_sym || :development)

require 'mua'
require 'async'
require 'logger'

# Async.logger.level = Logger::DEBUG

# TODO: Add OptionParser

Async do
  server = Mua::SMTP::Server.new(timeout: 5)

  puts('SMTP server listening on %s:%d' % [ server.bind, server.port ])
end
